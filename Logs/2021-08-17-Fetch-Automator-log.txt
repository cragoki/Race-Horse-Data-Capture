{ "time": "2021-08-17 08:38:10.1807", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:38:10.2058", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:38:10.2072", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:38:10.2072", "level": "INFO", "message": "------------------------------------Fetch Automator Inilializing---------------------------------" }
{ "time": "2021-08-17 08:38:10.2072", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:38:10.2072", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:38:10.2072", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:38:10.2072", "level": "INFO", "message": "                                                                                                 " }
{ "time": "2021-08-17 08:38:10.2072", "level": "INFO", "message": "                Batch Initialized with Identifier 174bde53-9290-4a8b-98aa-339a14a9233c          " }
{ "time": "2021-08-17 08:38:10.2072", "level": "INFO", "message": "Fetching Todays Events." }
{ "time": "2021-08-17 08:38:10.5597", "level": "INFO", "message": "Application started. Press Ctrl+C to shut down." }
{ "time": "2021-08-17 08:38:10.5597", "level": "INFO", "message": "Hosting environment: Production", "envName": "Production" }
{ "time": "2021-08-17 08:38:10.5817", "level": "INFO", "message": "Content root path: C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1", "contentRoot": "C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1" }
{ "time": "2021-08-17 08:38:11.9237", "level": "INFO", "message": "Entity Framework Core 5.0.9 initialized 'DbContextData' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MaxPoolSize=128 CommandTimeout=120 ", "version": "5.0.9", "contextType": "DbContextData", "provider": "Microsoft.EntityFrameworkCore.SqlServer", "options": "MaxPoolSize=128 CommandTimeout=120 ", "EventId_Id": 10403, "EventId_Name": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized", "EventId": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized" }
{ "time": "2021-08-17 08:38:12.3417", "level": "INFO", "message": "Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "19", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:38:12.4670", "level": "ERROR", "message": "!!! Error attempting to store course Wolverhampton.. The instance of entity type 'CourseEntity' cannot be tracked because another instance with the same key value for {'course_id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values. !!!" }
{ "time": "2021-08-17 08:38:12.6239", "level": "ERROR", "message": "Failed executing DbCommand (18ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "elapsed": "18", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:38:12.6610", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:38:12.7492", "level": "ERROR", "message": "Failed to add entity to the database for event Wolverhampton_8\/17\/2021. Error: Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14" }
{ "time": "2021-08-17 08:38:12.7670", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "0", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:38:12.7724", "level": "ERROR", "message": "Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "elapsed": "1", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:38:12.7944", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:38:12.8624", "level": "ERROR", "message": "!!! Error attempting to store course Hamilton.. An error occurred while updating the entries. See the inner exception for details. !!!" }
{ "time": "2021-08-17 08:38:12.8939", "level": "ERROR", "message": "Failed executing DbCommand (20ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (DbType = Guid), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (DbType = Int32), @p27='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7);\r\nDECLARE @inserted2 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 0),\r\n(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, 1)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted2;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted2 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "20", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (DbType = Guid), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (DbType = Int32), @p27='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7);\r\nDECLARE @inserted2 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 0),\r\n(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, 1)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted2;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted2 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:38:12.9151", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:38:13.0016", "level": "ERROR", "message": "Failed to add entity to the database for event Hamilton_8\/17\/2021. Error: Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14" }
{ "time": "2021-08-17 08:38:13.0238", "level": "INFO", "message": "Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "1", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:38:13.0394", "level": "ERROR", "message": "Failed executing DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (DbType = Guid), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (DbType = Guid), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (Size = 4000), @p29='?' (Size = 4000), @p30='?' (DbType = Int32), @p31='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11);\r\nDECLARE @inserted3 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, 0),\r\n(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted3;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted3 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "10", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (DbType = Guid), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (DbType = Guid), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (Size = 4000), @p29='?' (Size = 4000), @p30='?' (DbType = Int32), @p31='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11);\r\nDECLARE @inserted3 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, 0),\r\n(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted3;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted3 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:38:13.0734", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:38:13.1550", "level": "ERROR", "message": "!!! Error attempting to store course Carlisle.. An error occurred while updating the entries. See the inner exception for details. !!!" }
{ "time": "2021-08-17 08:38:13.1674", "level": "ERROR", "message": "Failed executing DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (DbType = Guid), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (DbType = Guid), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (Size = 4000), @p29='?' (Size = 4000), @p30='?' (DbType = Int32), @p31='?' (Size = 4000), @p32='?' (DbType = Boolean), @p33='?' (DbType = Guid), @p34='?' (DbType = Int32), @p35='?' (DbType = DateTime2), @p36='?' (Size = 4000), @p37='?' (Size = 4000), @p38='?' (Size = 4000), @p39='?' (Size = 4000), @p40='?' (DbType = Int32), @p41='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11);\r\nDECLARE @inserted3 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, 0),\r\n(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),\r\n(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, 2)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted3;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted3 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "9", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (DbType = Guid), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (DbType = Guid), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (Size = 4000), @p29='?' (Size = 4000), @p30='?' (DbType = Int32), @p31='?' (Size = 4000), @p32='?' (DbType = Boolean), @p33='?' (DbType = Guid), @p34='?' (DbType = Int32), @p35='?' (DbType = DateTime2), @p36='?' (Size = 4000), @p37='?' (Size = 4000), @p38='?' (Size = 4000), @p39='?' (Size = 4000), @p40='?' (DbType = Int32), @p41='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11);\r\nDECLARE @inserted3 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, 0),\r\n(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),\r\n(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, 2)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted3;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted3 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:38:13.2010", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:38:13.2891", "level": "ERROR", "message": "Failed to add entity to the database for event Carlisle_8\/17\/2021. Error: Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14" }
{ "time": "2021-08-17 08:38:13.3096", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "0", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:38:13.3262", "level": "ERROR", "message": "Failed executing DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (DbType = Guid), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Boolean), @p27='?' (DbType = Guid), @p28='?' (DbType = Int32), @p29='?' (DbType = DateTime2), @p30='?' (Size = 4000), @p31='?' (Size = 4000), @p32='?' (Size = 4000), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (Size = 4000), @p36='?' (DbType = Boolean), @p37='?' (DbType = Guid), @p38='?' (DbType = Int32), @p39='?' (DbType = DateTime2), @p40='?' (Size = 4000), @p41='?' (Size = 4000), @p42='?' (Size = 4000), @p43='?' (Size = 4000), @p44='?' (DbType = Int32), @p45='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15);\r\nDECLARE @inserted4 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, 0),\r\n(@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 1),\r\n(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, 2)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted4;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted4 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "10", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (DbType = Guid), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Boolean), @p27='?' (DbType = Guid), @p28='?' (DbType = Int32), @p29='?' (DbType = DateTime2), @p30='?' (Size = 4000), @p31='?' (Size = 4000), @p32='?' (Size = 4000), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (Size = 4000), @p36='?' (DbType = Boolean), @p37='?' (DbType = Guid), @p38='?' (DbType = Int32), @p39='?' (DbType = DateTime2), @p40='?' (Size = 4000), @p41='?' (Size = 4000), @p42='?' (Size = 4000), @p43='?' (Size = 4000), @p44='?' (DbType = Int32), @p45='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15);\r\nDECLARE @inserted4 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, 0),\r\n(@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 1),\r\n(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, 2)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted4;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted4 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:38:13.3541", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:38:13.4407", "level": "ERROR", "message": "!!! Error attempting to store course Sligo.. An error occurred while updating the entries. See the inner exception for details. !!!" }
{ "time": "2021-08-17 08:38:13.4566", "level": "ERROR", "message": "Failed executing DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (DbType = Guid), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Boolean), @p27='?' (DbType = Guid), @p28='?' (DbType = Int32), @p29='?' (DbType = DateTime2), @p30='?' (Size = 4000), @p31='?' (Size = 4000), @p32='?' (Size = 4000), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (Size = 4000), @p36='?' (DbType = Boolean), @p37='?' (DbType = Guid), @p38='?' (DbType = Int32), @p39='?' (DbType = DateTime2), @p40='?' (Size = 4000), @p41='?' (Size = 4000), @p42='?' (Size = 4000), @p43='?' (Size = 4000), @p44='?' (DbType = Int32), @p45='?' (Size = 4000), @p46='?' (DbType = Boolean), @p47='?' (DbType = Guid), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (Size = 4000), @p51='?' (Size = 4000), @p52='?' (Size = 4000), @p53='?' (Size = 4000), @p54='?' (DbType = Int32), @p55='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15);\r\nDECLARE @inserted4 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, 0),\r\n(@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 1),\r\n(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, 2),\r\n(@p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, 3)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted4;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted4 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "12", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (DbType = Guid), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Boolean), @p27='?' (DbType = Guid), @p28='?' (DbType = Int32), @p29='?' (DbType = DateTime2), @p30='?' (Size = 4000), @p31='?' (Size = 4000), @p32='?' (Size = 4000), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (Size = 4000), @p36='?' (DbType = Boolean), @p37='?' (DbType = Guid), @p38='?' (DbType = Int32), @p39='?' (DbType = DateTime2), @p40='?' (Size = 4000), @p41='?' (Size = 4000), @p42='?' (Size = 4000), @p43='?' (Size = 4000), @p44='?' (DbType = Int32), @p45='?' (Size = 4000), @p46='?' (DbType = Boolean), @p47='?' (DbType = Guid), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (Size = 4000), @p51='?' (Size = 4000), @p52='?' (Size = 4000), @p53='?' (Size = 4000), @p54='?' (DbType = Int32), @p55='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15);\r\nDECLARE @inserted4 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, 0),\r\n(@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 1),\r\n(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, 2),\r\n(@p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, 3)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted4;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted4 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:38:13.4883", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:38:13.5744", "level": "ERROR", "message": "Failed to add entity to the database for event Sligo_8\/17\/2021. Error: Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14" }
{ "time": "2021-08-17 08:38:13.5915", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "0", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:38:13.6500", "level": "ERROR", "message": "Failed executing DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = Guid), @p22='?' (DbType = Int32), @p23='?' (DbType = DateTime2), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = Int32), @p29='?' (Size = 4000), @p30='?' (DbType = Boolean), @p31='?' (DbType = Guid), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (Size = 4000), @p37='?' (Size = 4000), @p38='?' (DbType = Int32), @p39='?' (Size = 4000), @p40='?' (DbType = Boolean), @p41='?' (DbType = Guid), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (Size = 4000), @p45='?' (Size = 4000), @p46='?' (Size = 4000), @p47='?' (Size = 4000), @p48='?' (DbType = Int32), @p49='?' (Size = 4000), @p50='?' (DbType = Boolean), @p51='?' (DbType = Guid), @p52='?' (DbType = Int32), @p53='?' (DbType = DateTime2), @p54='?' (Size = 4000), @p55='?' (Size = 4000), @p56='?' (Size = 4000), @p57='?' (Size = 4000), @p58='?' (DbType = Int32), @p59='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15),\r\n(@p16, @p17, @p18, @p19);\r\nDECLARE @inserted5 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 0),\r\n(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, 1),\r\n(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, 2),\r\n(@p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted5;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted5 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "11", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = Guid), @p22='?' (DbType = Int32), @p23='?' (DbType = DateTime2), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = Int32), @p29='?' (Size = 4000), @p30='?' (DbType = Boolean), @p31='?' (DbType = Guid), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (Size = 4000), @p37='?' (Size = 4000), @p38='?' (DbType = Int32), @p39='?' (Size = 4000), @p40='?' (DbType = Boolean), @p41='?' (DbType = Guid), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (Size = 4000), @p45='?' (Size = 4000), @p46='?' (Size = 4000), @p47='?' (Size = 4000), @p48='?' (DbType = Int32), @p49='?' (Size = 4000), @p50='?' (DbType = Boolean), @p51='?' (DbType = Guid), @p52='?' (DbType = Int32), @p53='?' (DbType = DateTime2), @p54='?' (Size = 4000), @p55='?' (Size = 4000), @p56='?' (Size = 4000), @p57='?' (Size = 4000), @p58='?' (DbType = Int32), @p59='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15),\r\n(@p16, @p17, @p18, @p19);\r\nDECLARE @inserted5 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 0),\r\n(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, 1),\r\n(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, 2),\r\n(@p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted5;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted5 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:38:13.6911", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:38:13.7803", "level": "ERROR", "message": "!!! Error attempting to store course Leicester.. An error occurred while updating the entries. See the inner exception for details. !!!" }
{ "time": "2021-08-17 08:38:13.7974", "level": "ERROR", "message": "Failed executing DbCommand (13ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = Guid), @p22='?' (DbType = Int32), @p23='?' (DbType = DateTime2), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = Int32), @p29='?' (Size = 4000), @p30='?' (DbType = Boolean), @p31='?' (DbType = Guid), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (Size = 4000), @p37='?' (Size = 4000), @p38='?' (DbType = Int32), @p39='?' (Size = 4000), @p40='?' (DbType = Boolean), @p41='?' (DbType = Guid), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (Size = 4000), @p45='?' (Size = 4000), @p46='?' (Size = 4000), @p47='?' (Size = 4000), @p48='?' (DbType = Int32), @p49='?' (Size = 4000), @p50='?' (DbType = Boolean), @p51='?' (DbType = Guid), @p52='?' (DbType = Int32), @p53='?' (DbType = DateTime2), @p54='?' (Size = 4000), @p55='?' (Size = 4000), @p56='?' (Size = 4000), @p57='?' (Size = 4000), @p58='?' (DbType = Int32), @p59='?' (Size = 4000), @p60='?' (DbType = Boolean), @p61='?' (DbType = Guid), @p62='?' (DbType = Int32), @p63='?' (DbType = DateTime2), @p64='?' (Size = 4000), @p65='?' (Size = 4000), @p66='?' (Size = 4000), @p67='?' (Size = 4000), @p68='?' (DbType = Int32), @p69='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15),\r\n(@p16, @p17, @p18, @p19);\r\nDECLARE @inserted5 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 0),\r\n(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, 1),\r\n(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, 2),\r\n(@p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3),\r\n(@p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, 4)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted5;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted5 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "13", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = Guid), @p22='?' (DbType = Int32), @p23='?' (DbType = DateTime2), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = Int32), @p29='?' (Size = 4000), @p30='?' (DbType = Boolean), @p31='?' (DbType = Guid), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (Size = 4000), @p37='?' (Size = 4000), @p38='?' (DbType = Int32), @p39='?' (Size = 4000), @p40='?' (DbType = Boolean), @p41='?' (DbType = Guid), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (Size = 4000), @p45='?' (Size = 4000), @p46='?' (Size = 4000), @p47='?' (Size = 4000), @p48='?' (DbType = Int32), @p49='?' (Size = 4000), @p50='?' (DbType = Boolean), @p51='?' (DbType = Guid), @p52='?' (DbType = Int32), @p53='?' (DbType = DateTime2), @p54='?' (Size = 4000), @p55='?' (Size = 4000), @p56='?' (Size = 4000), @p57='?' (Size = 4000), @p58='?' (DbType = Int32), @p59='?' (Size = 4000), @p60='?' (DbType = Boolean), @p61='?' (DbType = Guid), @p62='?' (DbType = Int32), @p63='?' (DbType = DateTime2), @p64='?' (Size = 4000), @p65='?' (Size = 4000), @p66='?' (Size = 4000), @p67='?' (Size = 4000), @p68='?' (DbType = Int32), @p69='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15),\r\n(@p16, @p17, @p18, @p19);\r\nDECLARE @inserted5 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 0),\r\n(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, 1),\r\n(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, 2),\r\n(@p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3),\r\n(@p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, 4)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted5;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted5 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:38:13.8583", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:38:13.9385", "level": "ERROR", "message": "Failed to add entity to the database for event Leicester_8\/17\/2021. Error: Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:4fccf1a9-690f-4525-af0d-a5dee2d04d1c\r\nError Number:2627,State:1,Class:14" }
{ "time": "2021-08-17 08:38:13.9582", "level": "INFO", "message": "5 Events Retrieved and stored successfully." }
{ "time": "2021-08-17 08:39:31.1518", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:39:31.1755", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:39:31.1763", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:39:31.1763", "level": "INFO", "message": "------------------------------------Fetch Automator Inilializing---------------------------------" }
{ "time": "2021-08-17 08:39:31.1763", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:39:31.1763", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:39:31.1763", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:39:31.1763", "level": "INFO", "message": "                                                                                                 " }
{ "time": "2021-08-17 08:39:31.1763", "level": "INFO", "message": "                Batch Initialized with Identifier e0d81e19-7273-4487-b3a1-3c32dd2e0bba          " }
{ "time": "2021-08-17 08:39:31.1763", "level": "INFO", "message": "Fetching Todays Events." }
{ "time": "2021-08-17 08:39:31.2950", "level": "INFO", "message": "Application started. Press Ctrl+C to shut down." }
{ "time": "2021-08-17 08:39:31.2950", "level": "INFO", "message": "Hosting environment: Production", "envName": "Production" }
{ "time": "2021-08-17 08:39:31.3075", "level": "INFO", "message": "Content root path: C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1", "contentRoot": "C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1" }
{ "time": "2021-08-17 08:39:32.3049", "level": "INFO", "message": "Entity Framework Core 5.0.9 initialized 'DbContextData' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MaxPoolSize=128 CommandTimeout=120 ", "version": "5.0.9", "contextType": "DbContextData", "provider": "Microsoft.EntityFrameworkCore.SqlServer", "options": "MaxPoolSize=128 CommandTimeout=120 ", "EventId_Id": 10403, "EventId_Name": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized", "EventId": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized" }
{ "time": "2021-08-17 08:39:32.6876", "level": "INFO", "message": "Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "18", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:39:32.8048", "level": "ERROR", "message": "!!! Error attempting to store course Wolverhampton.. The instance of entity type 'CourseEntity' cannot be tracked because another instance with the same key value for {'course_id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values. !!!" }
{ "time": "2021-08-17 08:39:32.9446", "level": "ERROR", "message": "Failed executing DbCommand (17ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "elapsed": "17", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:39:32.9808", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:39:33.0749", "level": "ERROR", "message": "Failed to add entity to the database for event Wolverhampton_8\/17\/2021. Error: Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14" }
{ "time": "2021-08-17 08:39:33.0839", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "0", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:39:33.0839", "level": "ERROR", "message": "Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "elapsed": "2", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:39:33.1115", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:39:33.1772", "level": "ERROR", "message": "!!! Error attempting to store course Hamilton.. An error occurred while updating the entries. See the inner exception for details. !!!" }
{ "time": "2021-08-17 08:39:33.1982", "level": "ERROR", "message": "Failed executing DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (DbType = Guid), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (DbType = Int32), @p27='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7);\r\nDECLARE @inserted2 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 0),\r\n(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, 1)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted2;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted2 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "9", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (DbType = Guid), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (DbType = Int32), @p27='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7);\r\nDECLARE @inserted2 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 0),\r\n(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, 1)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted2;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted2 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:39:33.2845", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:39:33.3790", "level": "ERROR", "message": "Failed to add entity to the database for event Hamilton_8\/17\/2021. Error: Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14" }
{ "time": "2021-08-17 08:39:33.4088", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "0", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:39:33.4246", "level": "ERROR", "message": "Failed executing DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (DbType = Guid), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (DbType = Guid), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (Size = 4000), @p29='?' (Size = 4000), @p30='?' (DbType = Int32), @p31='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11);\r\nDECLARE @inserted3 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, 0),\r\n(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted3;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted3 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "10", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (DbType = Guid), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (DbType = Guid), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (Size = 4000), @p29='?' (Size = 4000), @p30='?' (DbType = Int32), @p31='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11);\r\nDECLARE @inserted3 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, 0),\r\n(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted3;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted3 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:39:33.4456", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:39:33.5261", "level": "ERROR", "message": "!!! Error attempting to store course Carlisle.. An error occurred while updating the entries. See the inner exception for details. !!!" }
{ "time": "2021-08-17 08:39:33.5393", "level": "ERROR", "message": "Failed executing DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (DbType = Guid), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (DbType = Guid), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (Size = 4000), @p29='?' (Size = 4000), @p30='?' (DbType = Int32), @p31='?' (Size = 4000), @p32='?' (DbType = Boolean), @p33='?' (DbType = Guid), @p34='?' (DbType = Int32), @p35='?' (DbType = DateTime2), @p36='?' (Size = 4000), @p37='?' (Size = 4000), @p38='?' (Size = 4000), @p39='?' (Size = 4000), @p40='?' (DbType = Int32), @p41='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11);\r\nDECLARE @inserted3 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, 0),\r\n(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),\r\n(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, 2)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted3;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted3 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "9", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (DbType = Guid), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (DbType = Guid), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (Size = 4000), @p29='?' (Size = 4000), @p30='?' (DbType = Int32), @p31='?' (Size = 4000), @p32='?' (DbType = Boolean), @p33='?' (DbType = Guid), @p34='?' (DbType = Int32), @p35='?' (DbType = DateTime2), @p36='?' (Size = 4000), @p37='?' (Size = 4000), @p38='?' (Size = 4000), @p39='?' (Size = 4000), @p40='?' (DbType = Int32), @p41='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11);\r\nDECLARE @inserted3 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, 0),\r\n(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),\r\n(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, 2)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted3;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted3 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:39:33.5790", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:39:33.6584", "level": "ERROR", "message": "Failed to add entity to the database for event Carlisle_8\/17\/2021. Error: Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14" }
{ "time": "2021-08-17 08:39:33.6724", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "0", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:39:33.6864", "level": "ERROR", "message": "Failed executing DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (DbType = Guid), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Boolean), @p27='?' (DbType = Guid), @p28='?' (DbType = Int32), @p29='?' (DbType = DateTime2), @p30='?' (Size = 4000), @p31='?' (Size = 4000), @p32='?' (Size = 4000), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (Size = 4000), @p36='?' (DbType = Boolean), @p37='?' (DbType = Guid), @p38='?' (DbType = Int32), @p39='?' (DbType = DateTime2), @p40='?' (Size = 4000), @p41='?' (Size = 4000), @p42='?' (Size = 4000), @p43='?' (Size = 4000), @p44='?' (DbType = Int32), @p45='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15);\r\nDECLARE @inserted4 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, 0),\r\n(@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 1),\r\n(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, 2)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted4;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted4 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "9", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (DbType = Guid), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Boolean), @p27='?' (DbType = Guid), @p28='?' (DbType = Int32), @p29='?' (DbType = DateTime2), @p30='?' (Size = 4000), @p31='?' (Size = 4000), @p32='?' (Size = 4000), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (Size = 4000), @p36='?' (DbType = Boolean), @p37='?' (DbType = Guid), @p38='?' (DbType = Int32), @p39='?' (DbType = DateTime2), @p40='?' (Size = 4000), @p41='?' (Size = 4000), @p42='?' (Size = 4000), @p43='?' (Size = 4000), @p44='?' (DbType = Int32), @p45='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15);\r\nDECLARE @inserted4 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, 0),\r\n(@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 1),\r\n(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, 2)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted4;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted4 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:39:33.7110", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:39:33.7975", "level": "ERROR", "message": "!!! Error attempting to store course Sligo.. An error occurred while updating the entries. See the inner exception for details. !!!" }
{ "time": "2021-08-17 08:39:33.8118", "level": "ERROR", "message": "Failed executing DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (DbType = Guid), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Boolean), @p27='?' (DbType = Guid), @p28='?' (DbType = Int32), @p29='?' (DbType = DateTime2), @p30='?' (Size = 4000), @p31='?' (Size = 4000), @p32='?' (Size = 4000), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (Size = 4000), @p36='?' (DbType = Boolean), @p37='?' (DbType = Guid), @p38='?' (DbType = Int32), @p39='?' (DbType = DateTime2), @p40='?' (Size = 4000), @p41='?' (Size = 4000), @p42='?' (Size = 4000), @p43='?' (Size = 4000), @p44='?' (DbType = Int32), @p45='?' (Size = 4000), @p46='?' (DbType = Boolean), @p47='?' (DbType = Guid), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (Size = 4000), @p51='?' (Size = 4000), @p52='?' (Size = 4000), @p53='?' (Size = 4000), @p54='?' (DbType = Int32), @p55='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15);\r\nDECLARE @inserted4 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, 0),\r\n(@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 1),\r\n(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, 2),\r\n(@p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, 3)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted4;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted4 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "10", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (DbType = Guid), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Boolean), @p27='?' (DbType = Guid), @p28='?' (DbType = Int32), @p29='?' (DbType = DateTime2), @p30='?' (Size = 4000), @p31='?' (Size = 4000), @p32='?' (Size = 4000), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (Size = 4000), @p36='?' (DbType = Boolean), @p37='?' (DbType = Guid), @p38='?' (DbType = Int32), @p39='?' (DbType = DateTime2), @p40='?' (Size = 4000), @p41='?' (Size = 4000), @p42='?' (Size = 4000), @p43='?' (Size = 4000), @p44='?' (DbType = Int32), @p45='?' (Size = 4000), @p46='?' (DbType = Boolean), @p47='?' (DbType = Guid), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (Size = 4000), @p51='?' (Size = 4000), @p52='?' (Size = 4000), @p53='?' (Size = 4000), @p54='?' (DbType = Int32), @p55='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15);\r\nDECLARE @inserted4 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, 0),\r\n(@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 1),\r\n(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, 2),\r\n(@p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, 3)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted4;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted4 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:39:33.8409", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:39:33.9170", "level": "ERROR", "message": "Failed to add entity to the database for event Sligo_8\/17\/2021. Error: Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14" }
{ "time": "2021-08-17 08:39:33.9284", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "0", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:39:33.9571", "level": "ERROR", "message": "Failed executing DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = Guid), @p22='?' (DbType = Int32), @p23='?' (DbType = DateTime2), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = Int32), @p29='?' (Size = 4000), @p30='?' (DbType = Boolean), @p31='?' (DbType = Guid), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (Size = 4000), @p37='?' (Size = 4000), @p38='?' (DbType = Int32), @p39='?' (Size = 4000), @p40='?' (DbType = Boolean), @p41='?' (DbType = Guid), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (Size = 4000), @p45='?' (Size = 4000), @p46='?' (Size = 4000), @p47='?' (Size = 4000), @p48='?' (DbType = Int32), @p49='?' (Size = 4000), @p50='?' (DbType = Boolean), @p51='?' (DbType = Guid), @p52='?' (DbType = Int32), @p53='?' (DbType = DateTime2), @p54='?' (Size = 4000), @p55='?' (Size = 4000), @p56='?' (Size = 4000), @p57='?' (Size = 4000), @p58='?' (DbType = Int32), @p59='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15),\r\n(@p16, @p17, @p18, @p19);\r\nDECLARE @inserted5 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 0),\r\n(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, 1),\r\n(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, 2),\r\n(@p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted5;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted5 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "11", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = Guid), @p22='?' (DbType = Int32), @p23='?' (DbType = DateTime2), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = Int32), @p29='?' (Size = 4000), @p30='?' (DbType = Boolean), @p31='?' (DbType = Guid), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (Size = 4000), @p37='?' (Size = 4000), @p38='?' (DbType = Int32), @p39='?' (Size = 4000), @p40='?' (DbType = Boolean), @p41='?' (DbType = Guid), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (Size = 4000), @p45='?' (Size = 4000), @p46='?' (Size = 4000), @p47='?' (Size = 4000), @p48='?' (DbType = Int32), @p49='?' (Size = 4000), @p50='?' (DbType = Boolean), @p51='?' (DbType = Guid), @p52='?' (DbType = Int32), @p53='?' (DbType = DateTime2), @p54='?' (Size = 4000), @p55='?' (Size = 4000), @p56='?' (Size = 4000), @p57='?' (Size = 4000), @p58='?' (DbType = Int32), @p59='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15),\r\n(@p16, @p17, @p18, @p19);\r\nDECLARE @inserted5 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 0),\r\n(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, 1),\r\n(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, 2),\r\n(@p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted5;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted5 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:39:34.0064", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:39:34.0857", "level": "ERROR", "message": "!!! Error attempting to store course Leicester.. An error occurred while updating the entries. See the inner exception for details. !!!" }
{ "time": "2021-08-17 08:39:34.1006", "level": "ERROR", "message": "Failed executing DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = Guid), @p22='?' (DbType = Int32), @p23='?' (DbType = DateTime2), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = Int32), @p29='?' (Size = 4000), @p30='?' (DbType = Boolean), @p31='?' (DbType = Guid), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (Size = 4000), @p37='?' (Size = 4000), @p38='?' (DbType = Int32), @p39='?' (Size = 4000), @p40='?' (DbType = Boolean), @p41='?' (DbType = Guid), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (Size = 4000), @p45='?' (Size = 4000), @p46='?' (Size = 4000), @p47='?' (Size = 4000), @p48='?' (DbType = Int32), @p49='?' (Size = 4000), @p50='?' (DbType = Boolean), @p51='?' (DbType = Guid), @p52='?' (DbType = Int32), @p53='?' (DbType = DateTime2), @p54='?' (Size = 4000), @p55='?' (Size = 4000), @p56='?' (Size = 4000), @p57='?' (Size = 4000), @p58='?' (DbType = Int32), @p59='?' (Size = 4000), @p60='?' (DbType = Boolean), @p61='?' (DbType = Guid), @p62='?' (DbType = Int32), @p63='?' (DbType = DateTime2), @p64='?' (Size = 4000), @p65='?' (Size = 4000), @p66='?' (Size = 4000), @p67='?' (Size = 4000), @p68='?' (DbType = Int32), @p69='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15),\r\n(@p16, @p17, @p18, @p19);\r\nDECLARE @inserted5 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 0),\r\n(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, 1),\r\n(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, 2),\r\n(@p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3),\r\n(@p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, 4)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted5;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted5 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "9", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = Guid), @p22='?' (DbType = Int32), @p23='?' (DbType = DateTime2), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = Int32), @p29='?' (Size = 4000), @p30='?' (DbType = Boolean), @p31='?' (DbType = Guid), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (Size = 4000), @p37='?' (Size = 4000), @p38='?' (DbType = Int32), @p39='?' (Size = 4000), @p40='?' (DbType = Boolean), @p41='?' (DbType = Guid), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (Size = 4000), @p45='?' (Size = 4000), @p46='?' (Size = 4000), @p47='?' (Size = 4000), @p48='?' (DbType = Int32), @p49='?' (Size = 4000), @p50='?' (DbType = Boolean), @p51='?' (DbType = Guid), @p52='?' (DbType = Int32), @p53='?' (DbType = DateTime2), @p54='?' (Size = 4000), @p55='?' (Size = 4000), @p56='?' (Size = 4000), @p57='?' (Size = 4000), @p58='?' (DbType = Int32), @p59='?' (Size = 4000), @p60='?' (DbType = Boolean), @p61='?' (DbType = Guid), @p62='?' (DbType = Int32), @p63='?' (DbType = DateTime2), @p64='?' (Size = 4000), @p65='?' (Size = 4000), @p66='?' (Size = 4000), @p67='?' (Size = 4000), @p68='?' (DbType = Int32), @p69='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15),\r\n(@p16, @p17, @p18, @p19);\r\nDECLARE @inserted5 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 0),\r\n(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, 1),\r\n(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, 2),\r\n(@p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3),\r\n(@p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, 4)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted5;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted5 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:39:34.1427", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:39:34.2290", "level": "ERROR", "message": "Failed to add entity to the database for event Leicester_8\/17\/2021. Error: Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:717ec494-79b6-4cb8-9c34-6280de5b28d3\r\nError Number:2627,State:1,Class:14" }
{ "time": "2021-08-17 08:39:34.2491", "level": "INFO", "message": "5 Events Retrieved and stored successfully." }
{ "time": "2021-08-17 08:39:34.3222", "level": "INFO", "message": "Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='120']\r\nSELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "elapsed": "1", "parameters": "@__p_0='?' (DbType = Int32)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:40:27.7537", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:40:27.7775", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:40:27.7775", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:40:27.7775", "level": "INFO", "message": "------------------------------------Fetch Automator Inilializing---------------------------------" }
{ "time": "2021-08-17 08:40:27.7775", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:40:27.7775", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:40:27.7775", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:40:27.7775", "level": "INFO", "message": "                                                                                                 " }
{ "time": "2021-08-17 08:40:27.7775", "level": "INFO", "message": "                Batch Initialized with Identifier 5e36eb2f-c387-44d6-b240-67f4a3706fd2          " }
{ "time": "2021-08-17 08:40:27.7775", "level": "INFO", "message": "Fetching Todays Events." }
{ "time": "2021-08-17 08:40:27.9106", "level": "INFO", "message": "Application started. Press Ctrl+C to shut down." }
{ "time": "2021-08-17 08:40:27.9106", "level": "INFO", "message": "Hosting environment: Production", "envName": "Production" }
{ "time": "2021-08-17 08:40:27.9106", "level": "INFO", "message": "Content root path: C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1", "contentRoot": "C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1" }
{ "time": "2021-08-17 08:40:28.9104", "level": "INFO", "message": "Entity Framework Core 5.0.9 initialized 'DbContextData' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MaxPoolSize=128 CommandTimeout=120 ", "version": "5.0.9", "contextType": "DbContextData", "provider": "Microsoft.EntityFrameworkCore.SqlServer", "options": "MaxPoolSize=128 CommandTimeout=120 ", "EventId_Id": 10403, "EventId_Name": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized", "EventId": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized" }
{ "time": "2021-08-17 08:40:29.2748", "level": "INFO", "message": "Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "17", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:40:29.3955", "level": "ERROR", "message": "!!! Error attempting to store course Wolverhampton.. The instance of entity type 'CourseEntity' cannot be tracked because another instance with the same key value for {'course_id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values. !!!" }
{ "time": "2021-08-17 08:40:29.5352", "level": "ERROR", "message": "Failed executing DbCommand (16ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "elapsed": "16", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:40:29.5724", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:40:29.6590", "level": "ERROR", "message": "Failed to add entity to the database for event Wolverhampton_8\/17\/2021. Error: Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14" }
{ "time": "2021-08-17 08:40:29.6833", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "0", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:40:29.6833", "level": "ERROR", "message": "Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "elapsed": "1", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:40:29.7081", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:40:29.7906", "level": "ERROR", "message": "!!! Error attempting to store course Hamilton.. An error occurred while updating the entries. See the inner exception for details. !!!" }
{ "time": "2021-08-17 08:40:29.8132", "level": "ERROR", "message": "Failed executing DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (DbType = Guid), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (DbType = Int32), @p27='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7);\r\nDECLARE @inserted2 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 0),\r\n(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, 1)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted2;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted2 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "10", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (DbType = Guid), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (DbType = Int32), @p27='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7);\r\nDECLARE @inserted2 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 0),\r\n(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, 1)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted2;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted2 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:40:29.8606", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:40:29.9495", "level": "ERROR", "message": "Failed to add entity to the database for event Hamilton_8\/17\/2021. Error: Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14" }
{ "time": "2021-08-17 08:40:29.9814", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "0", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:40:29.9962", "level": "ERROR", "message": "Failed executing DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (DbType = Guid), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (DbType = Guid), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (Size = 4000), @p29='?' (Size = 4000), @p30='?' (DbType = Int32), @p31='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11);\r\nDECLARE @inserted3 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, 0),\r\n(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted3;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted3 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "9", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (DbType = Guid), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (DbType = Guid), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (Size = 4000), @p29='?' (Size = 4000), @p30='?' (DbType = Int32), @p31='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11);\r\nDECLARE @inserted3 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, 0),\r\n(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted3;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted3 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:40:30.0201", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:40:30.0967", "level": "ERROR", "message": "!!! Error attempting to store course Carlisle.. An error occurred while updating the entries. See the inner exception for details. !!!" }
{ "time": "2021-08-17 08:40:30.1090", "level": "ERROR", "message": "Failed executing DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (DbType = Guid), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (DbType = Guid), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (Size = 4000), @p29='?' (Size = 4000), @p30='?' (DbType = Int32), @p31='?' (Size = 4000), @p32='?' (DbType = Boolean), @p33='?' (DbType = Guid), @p34='?' (DbType = Int32), @p35='?' (DbType = DateTime2), @p36='?' (Size = 4000), @p37='?' (Size = 4000), @p38='?' (Size = 4000), @p39='?' (Size = 4000), @p40='?' (DbType = Int32), @p41='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11);\r\nDECLARE @inserted3 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, 0),\r\n(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),\r\n(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, 2)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted3;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted3 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "9", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (DbType = Guid), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (DbType = Guid), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (Size = 4000), @p29='?' (Size = 4000), @p30='?' (DbType = Int32), @p31='?' (Size = 4000), @p32='?' (DbType = Boolean), @p33='?' (DbType = Guid), @p34='?' (DbType = Int32), @p35='?' (DbType = DateTime2), @p36='?' (Size = 4000), @p37='?' (Size = 4000), @p38='?' (Size = 4000), @p39='?' (Size = 4000), @p40='?' (DbType = Int32), @p41='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11);\r\nDECLARE @inserted3 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, 0),\r\n(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 1),\r\n(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, 2)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted3;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted3 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:40:30.1444", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:40:30.2214", "level": "ERROR", "message": "Failed to add entity to the database for event Carlisle_8\/17\/2021. Error: Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14" }
{ "time": "2021-08-17 08:40:30.2338", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "0", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:40:30.2563", "level": "ERROR", "message": "Failed executing DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (DbType = Guid), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Boolean), @p27='?' (DbType = Guid), @p28='?' (DbType = Int32), @p29='?' (DbType = DateTime2), @p30='?' (Size = 4000), @p31='?' (Size = 4000), @p32='?' (Size = 4000), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (Size = 4000), @p36='?' (DbType = Boolean), @p37='?' (DbType = Guid), @p38='?' (DbType = Int32), @p39='?' (DbType = DateTime2), @p40='?' (Size = 4000), @p41='?' (Size = 4000), @p42='?' (Size = 4000), @p43='?' (Size = 4000), @p44='?' (DbType = Int32), @p45='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15);\r\nDECLARE @inserted4 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, 0),\r\n(@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 1),\r\n(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, 2)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted4;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted4 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "10", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (DbType = Guid), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Boolean), @p27='?' (DbType = Guid), @p28='?' (DbType = Int32), @p29='?' (DbType = DateTime2), @p30='?' (Size = 4000), @p31='?' (Size = 4000), @p32='?' (Size = 4000), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (Size = 4000), @p36='?' (DbType = Boolean), @p37='?' (DbType = Guid), @p38='?' (DbType = Int32), @p39='?' (DbType = DateTime2), @p40='?' (Size = 4000), @p41='?' (Size = 4000), @p42='?' (Size = 4000), @p43='?' (Size = 4000), @p44='?' (DbType = Int32), @p45='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15);\r\nDECLARE @inserted4 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, 0),\r\n(@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 1),\r\n(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, 2)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted4;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted4 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:40:30.3006", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:40:30.3935", "level": "ERROR", "message": "!!! Error attempting to store course Sligo.. An error occurred while updating the entries. See the inner exception for details. !!!" }
{ "time": "2021-08-17 08:40:30.4063", "level": "ERROR", "message": "Failed executing DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (DbType = Guid), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Boolean), @p27='?' (DbType = Guid), @p28='?' (DbType = Int32), @p29='?' (DbType = DateTime2), @p30='?' (Size = 4000), @p31='?' (Size = 4000), @p32='?' (Size = 4000), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (Size = 4000), @p36='?' (DbType = Boolean), @p37='?' (DbType = Guid), @p38='?' (DbType = Int32), @p39='?' (DbType = DateTime2), @p40='?' (Size = 4000), @p41='?' (Size = 4000), @p42='?' (Size = 4000), @p43='?' (Size = 4000), @p44='?' (DbType = Int32), @p45='?' (Size = 4000), @p46='?' (DbType = Boolean), @p47='?' (DbType = Guid), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (Size = 4000), @p51='?' (Size = 4000), @p52='?' (Size = 4000), @p53='?' (Size = 4000), @p54='?' (DbType = Int32), @p55='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15);\r\nDECLARE @inserted4 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, 0),\r\n(@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 1),\r\n(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, 2),\r\n(@p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, 3)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted4;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted4 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "9", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (DbType = Guid), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Boolean), @p27='?' (DbType = Guid), @p28='?' (DbType = Int32), @p29='?' (DbType = DateTime2), @p30='?' (Size = 4000), @p31='?' (Size = 4000), @p32='?' (Size = 4000), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (Size = 4000), @p36='?' (DbType = Boolean), @p37='?' (DbType = Guid), @p38='?' (DbType = Int32), @p39='?' (DbType = DateTime2), @p40='?' (Size = 4000), @p41='?' (Size = 4000), @p42='?' (Size = 4000), @p43='?' (Size = 4000), @p44='?' (DbType = Int32), @p45='?' (Size = 4000), @p46='?' (DbType = Boolean), @p47='?' (DbType = Guid), @p48='?' (DbType = Int32), @p49='?' (DbType = DateTime2), @p50='?' (Size = 4000), @p51='?' (Size = 4000), @p52='?' (Size = 4000), @p53='?' (Size = 4000), @p54='?' (DbType = Int32), @p55='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15);\r\nDECLARE @inserted4 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, 0),\r\n(@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 1),\r\n(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, 2),\r\n(@p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, 3)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted4;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted4 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:40:30.4418", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:40:30.5065", "level": "ERROR", "message": "Failed to add entity to the database for event Sligo_8\/17\/2021. Error: Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14" }
{ "time": "2021-08-17 08:40:30.5065", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "0", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:40:30.5326", "level": "ERROR", "message": "Failed executing DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = Guid), @p22='?' (DbType = Int32), @p23='?' (DbType = DateTime2), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = Int32), @p29='?' (Size = 4000), @p30='?' (DbType = Boolean), @p31='?' (DbType = Guid), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (Size = 4000), @p37='?' (Size = 4000), @p38='?' (DbType = Int32), @p39='?' (Size = 4000), @p40='?' (DbType = Boolean), @p41='?' (DbType = Guid), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (Size = 4000), @p45='?' (Size = 4000), @p46='?' (Size = 4000), @p47='?' (Size = 4000), @p48='?' (DbType = Int32), @p49='?' (Size = 4000), @p50='?' (DbType = Boolean), @p51='?' (DbType = Guid), @p52='?' (DbType = Int32), @p53='?' (DbType = DateTime2), @p54='?' (Size = 4000), @p55='?' (Size = 4000), @p56='?' (Size = 4000), @p57='?' (Size = 4000), @p58='?' (DbType = Int32), @p59='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15),\r\n(@p16, @p17, @p18, @p19);\r\nDECLARE @inserted5 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 0),\r\n(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, 1),\r\n(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, 2),\r\n(@p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted5;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted5 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "10", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = Guid), @p22='?' (DbType = Int32), @p23='?' (DbType = DateTime2), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = Int32), @p29='?' (Size = 4000), @p30='?' (DbType = Boolean), @p31='?' (DbType = Guid), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (Size = 4000), @p37='?' (Size = 4000), @p38='?' (DbType = Int32), @p39='?' (Size = 4000), @p40='?' (DbType = Boolean), @p41='?' (DbType = Guid), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (Size = 4000), @p45='?' (Size = 4000), @p46='?' (Size = 4000), @p47='?' (Size = 4000), @p48='?' (DbType = Int32), @p49='?' (Size = 4000), @p50='?' (DbType = Boolean), @p51='?' (DbType = Guid), @p52='?' (DbType = Int32), @p53='?' (DbType = DateTime2), @p54='?' (Size = 4000), @p55='?' (Size = 4000), @p56='?' (Size = 4000), @p57='?' (Size = 4000), @p58='?' (DbType = Int32), @p59='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15),\r\n(@p16, @p17, @p18, @p19);\r\nDECLARE @inserted5 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 0),\r\n(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, 1),\r\n(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, 2),\r\n(@p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted5;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted5 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:40:30.5559", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:40:30.6276", "level": "ERROR", "message": "!!! Error attempting to store course Leicester.. An error occurred while updating the entries. See the inner exception for details. !!!" }
{ "time": "2021-08-17 08:40:30.6429", "level": "ERROR", "message": "Failed executing DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = Guid), @p22='?' (DbType = Int32), @p23='?' (DbType = DateTime2), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = Int32), @p29='?' (Size = 4000), @p30='?' (DbType = Boolean), @p31='?' (DbType = Guid), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (Size = 4000), @p37='?' (Size = 4000), @p38='?' (DbType = Int32), @p39='?' (Size = 4000), @p40='?' (DbType = Boolean), @p41='?' (DbType = Guid), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (Size = 4000), @p45='?' (Size = 4000), @p46='?' (Size = 4000), @p47='?' (Size = 4000), @p48='?' (DbType = Int32), @p49='?' (Size = 4000), @p50='?' (DbType = Boolean), @p51='?' (DbType = Guid), @p52='?' (DbType = Int32), @p53='?' (DbType = DateTime2), @p54='?' (Size = 4000), @p55='?' (Size = 4000), @p56='?' (Size = 4000), @p57='?' (Size = 4000), @p58='?' (DbType = Int32), @p59='?' (Size = 4000), @p60='?' (DbType = Boolean), @p61='?' (DbType = Guid), @p62='?' (DbType = Int32), @p63='?' (DbType = DateTime2), @p64='?' (Size = 4000), @p65='?' (Size = 4000), @p66='?' (Size = 4000), @p67='?' (Size = 4000), @p68='?' (DbType = Int32), @p69='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15),\r\n(@p16, @p17, @p18, @p19);\r\nDECLARE @inserted5 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 0),\r\n(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, 1),\r\n(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, 2),\r\n(@p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3),\r\n(@p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, 4)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted5;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted5 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "11", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = Guid), @p22='?' (DbType = Int32), @p23='?' (DbType = DateTime2), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (Size = 4000), @p27='?' (Size = 4000), @p28='?' (DbType = Int32), @p29='?' (Size = 4000), @p30='?' (DbType = Boolean), @p31='?' (DbType = Guid), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (Size = 4000), @p37='?' (Size = 4000), @p38='?' (DbType = Int32), @p39='?' (Size = 4000), @p40='?' (DbType = Boolean), @p41='?' (DbType = Guid), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (Size = 4000), @p45='?' (Size = 4000), @p46='?' (Size = 4000), @p47='?' (Size = 4000), @p48='?' (DbType = Int32), @p49='?' (Size = 4000), @p50='?' (DbType = Boolean), @p51='?' (DbType = Guid), @p52='?' (DbType = Int32), @p53='?' (DbType = DateTime2), @p54='?' (Size = 4000), @p55='?' (Size = 4000), @p56='?' (Size = 4000), @p57='?' (Size = 4000), @p58='?' (DbType = Int32), @p59='?' (Size = 4000), @p60='?' (DbType = Boolean), @p61='?' (DbType = Guid), @p62='?' (DbType = Int32), @p63='?' (DbType = DateTime2), @p64='?' (Size = 4000), @p65='?' (Size = 4000), @p66='?' (Size = 4000), @p67='?' (Size = 4000), @p68='?' (DbType = Int32), @p69='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3),\r\n(@p4, @p5, @p6, @p7),\r\n(@p8, @p9, @p10, @p11),\r\n(@p12, @p13, @p14, @p15),\r\n(@p16, @p17, @p18, @p19);\r\nDECLARE @inserted5 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 0),\r\n(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, 1),\r\n(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, 2),\r\n(@p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, 3),\r\n(@p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, 4)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted5;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted5 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:40:30.6991", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:40:30.7657", "level": "ERROR", "message": "Failed to add entity to the database for event Leicester_8\/17\/2021. Error: Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14" }
{ "time": "2021-08-17 08:40:30.7731", "level": "INFO", "message": "5 Events Retrieved and stored successfully." }
{ "time": "2021-08-17 08:40:30.8436", "level": "INFO", "message": "Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='120']\r\nSELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "elapsed": "1", "parameters": "@__p_0='?' (DbType = Int32)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:40:30.8599", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='120']\r\nSELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "elapsed": "0", "parameters": "@__p_0='?' (DbType = Int32)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:40:30.8636", "level": "INFO", "message": "Fetching Races for event Wolverhampton_8\/13\/2021." }
{ "time": "2021-08-17 08:40:30.8636", "level": "INFO", "message": "Races Retrieved for event Wolverhampton_8\/13\/2021" }
{ "time": "2021-08-17 08:40:30.8636", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='120']\r\nSELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "elapsed": "0", "parameters": "@__p_0='?' (DbType = Int32)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:40:30.8636", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='120']\r\nSELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "elapsed": "0", "parameters": "@__p_0='?' (DbType = Int32)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:40:30.8800", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='120']\r\nSELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "elapsed": "0", "parameters": "@__p_0='?' (DbType = Int32)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:40:30.9598", "level": "ERROR", "message": "Failed executing DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Int32), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Int32), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (DbType = Boolean), @p24='?' (DbType = Guid), @p25='?' (DbType = Int32), @p26='?' (DbType = DateTime2), @p27='?' (Size = 4000), @p28='?' (Size = 4000), @p29='?' (Size = 4000), @p30='?' (Size = 4000), @p31='?' (DbType = Int32), @p32='?' (Size = 4000), @p33='?' (DbType = Boolean), @p34='?' (DbType = Guid), @p35='?' (DbType = Int32), @p36='?' (DbType = DateTime2), @p37='?' (Size = 4000), @p38='?' (Size = 4000), @p39='?' (Size = 4000), @p40='?' (Size = 4000), @p41='?' (DbType = Int32), @p42='?' (Size = 4000), @p43='?' (DbType = Boolean), @p44='?' (DbType = Guid), @p45='?' (DbType = Int32), @p46='?' (DbType = DateTime2), @p47='?' (Size = 4000), @p48='?' (Size = 4000), @p49='?' (Size = 4000), @p50='?' (Size = 4000), @p51='?' (DbType = Int32), @p52='?' (Size = 4000), @p53='?' (DbType = Boolean), @p54='?' (DbType = Guid), @p55='?' (DbType = Int32), @p56='?' (DbType = DateTime2), @p57='?' (Size = 4000), @p58='?' (Size = 4000), @p59='?' (Size = 4000), @p60='?' (Size = 4000), @p61='?' (DbType = Int32), @p62='?' (Size = 4000), @p63='?' (DbType = Boolean), @p64='?' (DbType = Guid), @p65='?' (DbType = Int32), @p66='?' (DbType = DateTime2), @p67='?' (Size = 4000), @p68='?' (Size = 4000), @p69='?' (Size = 4000), @p70='?' (Size = 4000), @p71='?' (DbType = Int32), @p72='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_batch] ([batch_id], [date], [diagnostics])\r\nVALUES (@p0, @p1, @p2);\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p3, @p4, @p5, @p6),\r\n(@p7, @p8, @p9, @p10),\r\n(@p11, @p12, @p13, @p14),\r\n(@p15, @p16, @p17, @p18),\r\n(@p19, @p20, @p21, @p22);\r\nDECLARE @inserted6 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, 0),\r\n(@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, 1),\r\n(@p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, 2),\r\n(@p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, 3),\r\n(@p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, 4)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted6;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted6 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "elapsed": "11", "parameters": "@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Int32), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Int32), @p20='?' (DbType = Boolean), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (DbType = Boolean), @p24='?' (DbType = Guid), @p25='?' (DbType = Int32), @p26='?' (DbType = DateTime2), @p27='?' (Size = 4000), @p28='?' (Size = 4000), @p29='?' (Size = 4000), @p30='?' (Size = 4000), @p31='?' (DbType = Int32), @p32='?' (Size = 4000), @p33='?' (DbType = Boolean), @p34='?' (DbType = Guid), @p35='?' (DbType = Int32), @p36='?' (DbType = DateTime2), @p37='?' (Size = 4000), @p38='?' (Size = 4000), @p39='?' (Size = 4000), @p40='?' (Size = 4000), @p41='?' (DbType = Int32), @p42='?' (Size = 4000), @p43='?' (DbType = Boolean), @p44='?' (DbType = Guid), @p45='?' (DbType = Int32), @p46='?' (DbType = DateTime2), @p47='?' (Size = 4000), @p48='?' (Size = 4000), @p49='?' (Size = 4000), @p50='?' (Size = 4000), @p51='?' (DbType = Int32), @p52='?' (Size = 4000), @p53='?' (DbType = Boolean), @p54='?' (DbType = Guid), @p55='?' (DbType = Int32), @p56='?' (DbType = DateTime2), @p57='?' (Size = 4000), @p58='?' (Size = 4000), @p59='?' (Size = 4000), @p60='?' (Size = 4000), @p61='?' (DbType = Int32), @p62='?' (Size = 4000), @p63='?' (DbType = Boolean), @p64='?' (DbType = Guid), @p65='?' (DbType = Int32), @p66='?' (DbType = DateTime2), @p67='?' (Size = 4000), @p68='?' (Size = 4000), @p69='?' (Size = 4000), @p70='?' (Size = 4000), @p71='?' (DbType = Int32), @p72='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_batch] ([batch_id], [date], [diagnostics])\r\nVALUES (@p0, @p1, @p2);\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p3, @p4, @p5, @p6),\r\n(@p7, @p8, @p9, @p10),\r\n(@p11, @p12, @p13, @p14),\r\n(@p15, @p16, @p17, @p18),\r\n(@p19, @p20, @p21, @p22);\r\nDECLARE @inserted6 TABLE ([event_id] int, [_Position] [int]);\r\nMERGE [tb_event] USING (\r\nVALUES (@p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, 0),\r\n(@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, 1),\r\n(@p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, 2),\r\n(@p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, 3),\r\n(@p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, 4)) AS i ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type], _Position) ON 1=0\r\nWHEN NOT MATCHED THEN\r\nINSERT ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (i.[abandoned], i.[batch_id], i.[course_id], i.[created], i.[hash_name], i.[meeting_type], i.[meeting_url], i.[name], i.[races], i.[surface_type])\r\nOUTPUT INSERTED.[event_id], i._Position\r\nINTO @inserted6;\r\n\r\nSELECT [t].[event_id] FROM [tb_event] t\r\nINNER JOIN @inserted6 i ON ([t].[event_id] = [i].[event_id])\r\nORDER BY [i].[_Position];", "EventId_Id": 20102, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandError" }
{ "time": "2021-08-17 08:40:31.0322", "level": "ERROR", "message": "An exception occurred in the database while saving changes for context type 'Infrastructure.Data.DbContextData'.\r\nMicrosoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "contextType": "Infrastructure.Data.DbContextData", "newline": "\r\n", "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_tb_course'. Cannot insert duplicate key in object 'dbo.tb_course'. The duplicate key value is (513).\r\nThe MERGE statement conflicted with the FOREIGN KEY constraint \"FK_tb_event_tb_course\". The conflict occurred in database \"RHDC\", table \"dbo.tb_course\", column 'course_id'.\r\nThe statement has been terminated.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TrySetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\nClientConnectionId:e3b23ce4-5dda-4725-854c-5601bf962976\r\nError Number:2627,State:1,Class:14\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)", "EventId_Id": 10000, "EventId_Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed", "EventId": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed" }
{ "time": "2021-08-17 08:41:07.9361", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:41:07.9600", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:41:07.9600", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:41:07.9600", "level": "INFO", "message": "------------------------------------Fetch Automator Inilializing---------------------------------" }
{ "time": "2021-08-17 08:41:07.9600", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:41:07.9600", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:41:07.9600", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:41:07.9600", "level": "INFO", "message": "                                                                                                 " }
{ "time": "2021-08-17 08:41:07.9600", "level": "INFO", "message": "                Batch Initialized with Identifier 7a1ba2e1-031e-4d44-9af8-b8913faa27d8          " }
{ "time": "2021-08-17 08:41:11.7468", "level": "INFO", "message": "Fetching Todays Events." }
{ "time": "2021-08-17 08:41:16.2193", "level": "INFO", "message": "Application started. Press Ctrl+C to shut down." }
{ "time": "2021-08-17 08:41:16.2271", "level": "INFO", "message": "Hosting environment: Production", "envName": "Production" }
{ "time": "2021-08-17 08:41:16.2271", "level": "INFO", "message": "Content root path: C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1", "contentRoot": "C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1" }
{ "time": "2021-08-17 08:42:04.4293", "level": "INFO", "message": "Entity Framework Core 5.0.9 initialized 'DbContextData' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MaxPoolSize=128 CommandTimeout=120 ", "version": "5.0.9", "contextType": "DbContextData", "provider": "Microsoft.EntityFrameworkCore.SqlServer", "options": "MaxPoolSize=128 CommandTimeout=120 ", "EventId_Id": 10403, "EventId_Name": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized", "EventId": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized" }
{ "time": "2021-08-17 08:42:04.7999", "level": "INFO", "message": "Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "17", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 08:43:55.1670", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:43:55.1911", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:43:55.1911", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:43:55.1911", "level": "INFO", "message": "------------------------------------Fetch Automator Inilializing---------------------------------" }
{ "time": "2021-08-17 08:43:55.1911", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:43:55.1911", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:43:55.1911", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 08:43:55.1911", "level": "INFO", "message": "                                                                                                 " }
{ "time": "2021-08-17 08:43:55.1911", "level": "INFO", "message": "                Batch Initialized with Identifier 75331e4d-a185-44da-bac3-d32d0b058ce4          " }
{ "time": "2021-08-17 08:43:56.9337", "level": "INFO", "message": "Fetching Todays Events." }
{ "time": "2021-08-17 08:43:57.0454", "level": "INFO", "message": "Application started. Press Ctrl+C to shut down." }
{ "time": "2021-08-17 08:43:57.0454", "level": "INFO", "message": "Hosting environment: Production", "envName": "Production" }
{ "time": "2021-08-17 08:43:57.0583", "level": "INFO", "message": "Content root path: C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1", "contentRoot": "C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1" }
{ "time": "2021-08-17 08:44:04.2786", "level": "INFO", "message": "Entity Framework Core 5.0.9 initialized 'DbContextData' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MaxPoolSize=128 CommandTimeout=120 ", "version": "5.0.9", "contextType": "DbContextData", "provider": "Microsoft.EntityFrameworkCore.SqlServer", "options": "MaxPoolSize=128 CommandTimeout=120 ", "EventId_Id": 10403, "EventId_Name": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized", "EventId": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized" }
{ "time": "2021-08-17 08:44:04.6475", "level": "INFO", "message": "Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "18", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:08:24.7822", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:08:24.8067", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:08:24.8067", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:08:24.8067", "level": "INFO", "message": "------------------------------------Fetch Automator Inilializing---------------------------------" }
{ "time": "2021-08-17 09:08:24.8067", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:08:24.8067", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:08:24.8067", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:08:24.8067", "level": "INFO", "message": "                                                                                                 " }
{ "time": "2021-08-17 09:08:24.8067", "level": "INFO", "message": "                Batch Initialized with Identifier fa2744df-2150-41e4-a3e0-d4753fc33fea          " }
{ "time": "2021-08-17 09:08:27.7182", "level": "INFO", "message": "Fetching Todays Events." }
{ "time": "2021-08-17 09:08:27.8333", "level": "INFO", "message": "Application started. Press Ctrl+C to shut down." }
{ "time": "2021-08-17 09:08:27.8333", "level": "INFO", "message": "Hosting environment: Production", "envName": "Production" }
{ "time": "2021-08-17 09:08:27.8333", "level": "INFO", "message": "Content root path: C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1", "contentRoot": "C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1" }
{ "time": "2021-08-17 09:08:30.1213", "level": "INFO", "message": "Entity Framework Core 5.0.9 initialized 'DbContextData' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MaxPoolSize=128 CommandTimeout=120 ", "version": "5.0.9", "contextType": "DbContextData", "provider": "Microsoft.EntityFrameworkCore.SqlServer", "options": "MaxPoolSize=128 CommandTimeout=120 ", "EventId_Id": 10403, "EventId_Name": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized", "EventId": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized" }
{ "time": "2021-08-17 09:08:30.5036", "level": "INFO", "message": "Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "18", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:08:47.0478", "level": "ERROR", "message": "!!! Error attempting to store course Wolverhampton.. Index was out of range. Must be non-negative and less than the size of the collection. (Parameter 'index') !!!" }
{ "time": "2021-08-17 09:08:47.1792", "level": "INFO", "message": "Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_event] ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);\r\nSELECT [event_id]\r\nFROM [tb_event]\r\nWHERE @@ROWCOUNT = 1 AND [event_id] = scope_identity();", "elapsed": "16", "parameters": "@p0='?' (DbType = Boolean), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_event] ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);\r\nSELECT [event_id]\r\nFROM [tb_event]\r\nWHERE @@ROWCOUNT = 1 AND [event_id] = scope_identity();", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:08:51.8499", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:08:51.8748", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:08:51.8748", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:08:51.8748", "level": "INFO", "message": "------------------------------------Fetch Automator Inilializing---------------------------------" }
{ "time": "2021-08-17 09:08:51.8748", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:08:51.8748", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:08:51.8748", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:08:51.8748", "level": "INFO", "message": "                                                                                                 " }
{ "time": "2021-08-17 09:08:51.8748", "level": "INFO", "message": "                Batch Initialized with Identifier 2b36245b-b7fe-4f55-8fbc-6841df8feb0a          " }
{ "time": "2021-08-17 09:08:53.8920", "level": "INFO", "message": "Fetching Todays Events." }
{ "time": "2021-08-17 09:08:54.0022", "level": "INFO", "message": "Application started. Press Ctrl+C to shut down." }
{ "time": "2021-08-17 09:08:54.0089", "level": "INFO", "message": "Hosting environment: Production", "envName": "Production" }
{ "time": "2021-08-17 09:08:54.0199", "level": "INFO", "message": "Content root path: C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1", "contentRoot": "C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1" }
{ "time": "2021-08-17 09:08:55.6515", "level": "INFO", "message": "Entity Framework Core 5.0.9 initialized 'DbContextData' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MaxPoolSize=128 CommandTimeout=120 ", "version": "5.0.9", "contextType": "DbContextData", "provider": "Microsoft.EntityFrameworkCore.SqlServer", "options": "MaxPoolSize=128 CommandTimeout=120 ", "EventId_Id": 10403, "EventId_Name": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized", "EventId": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized" }
{ "time": "2021-08-17 09:08:56.0314", "level": "INFO", "message": "Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "19", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:13:32.6351", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:13:32.6575", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:13:32.6575", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:13:32.6575", "level": "INFO", "message": "------------------------------------Fetch Automator Inilializing---------------------------------" }
{ "time": "2021-08-17 09:13:32.6575", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:13:32.6575", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:13:32.6575", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:13:32.6607", "level": "INFO", "message": "                                                                                                 " }
{ "time": "2021-08-17 09:13:32.6607", "level": "INFO", "message": "                Batch Initialized with Identifier b26d0c3b-6fa8-40c3-b419-b9a16b48a7c0          " }
{ "time": "2021-08-17 09:13:34.7356", "level": "INFO", "message": "Fetching Todays Events." }
{ "time": "2021-08-17 09:13:34.8524", "level": "INFO", "message": "Application started. Press Ctrl+C to shut down." }
{ "time": "2021-08-17 09:13:34.8524", "level": "INFO", "message": "Hosting environment: Production", "envName": "Production" }
{ "time": "2021-08-17 09:13:34.8524", "level": "INFO", "message": "Content root path: C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1", "contentRoot": "C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1" }
{ "time": "2021-08-17 09:13:39.3037", "level": "INFO", "message": "Entity Framework Core 5.0.9 initialized 'DbContextData' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MaxPoolSize=128 CommandTimeout=120 ", "version": "5.0.9", "contextType": "DbContextData", "provider": "Microsoft.EntityFrameworkCore.SqlServer", "options": "MaxPoolSize=128 CommandTimeout=120 ", "EventId_Id": 10403, "EventId_Name": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized", "EventId": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized" }
{ "time": "2021-08-17 09:13:39.6789", "level": "INFO", "message": "Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "18", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:14:47.8781", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:14:47.9040", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:14:47.9040", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:14:47.9040", "level": "INFO", "message": "------------------------------------Fetch Automator Inilializing---------------------------------" }
{ "time": "2021-08-17 09:14:47.9040", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:14:47.9040", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:14:47.9040", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:14:47.9040", "level": "INFO", "message": "                                                                                                 " }
{ "time": "2021-08-17 09:14:47.9040", "level": "INFO", "message": "                Batch Initialized with Identifier 71edab85-472f-47ae-a3e7-3c53483a6f5d          " }
{ "time": "2021-08-17 09:14:51.6187", "level": "INFO", "message": "Fetching Todays Events." }
{ "time": "2021-08-17 09:14:51.7279", "level": "INFO", "message": "Application started. Press Ctrl+C to shut down." }
{ "time": "2021-08-17 09:14:51.7279", "level": "INFO", "message": "Hosting environment: Production", "envName": "Production" }
{ "time": "2021-08-17 09:14:51.7411", "level": "INFO", "message": "Content root path: C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1", "contentRoot": "C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1" }
{ "time": "2021-08-17 09:14:53.4656", "level": "INFO", "message": "Entity Framework Core 5.0.9 initialized 'DbContextData' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MaxPoolSize=128 CommandTimeout=120 ", "version": "5.0.9", "contextType": "DbContextData", "provider": "Microsoft.EntityFrameworkCore.SqlServer", "options": "MaxPoolSize=128 CommandTimeout=120 ", "EventId_Id": 10403, "EventId_Name": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized", "EventId": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized" }
{ "time": "2021-08-17 09:14:53.8517", "level": "INFO", "message": "Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "19", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:18:00.5765", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:18:00.6014", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:18:00.6014", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:18:00.6014", "level": "INFO", "message": "------------------------------------Fetch Automator Inilializing---------------------------------" }
{ "time": "2021-08-17 09:18:00.6014", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:18:00.6014", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:18:00.6014", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:18:00.6014", "level": "INFO", "message": "                                                                                                 " }
{ "time": "2021-08-17 09:18:00.6014", "level": "INFO", "message": "                Batch Initialized with Identifier 495f4640-874d-4ea2-9816-e83fb5a1dae5          " }
{ "time": "2021-08-17 09:18:04.6730", "level": "INFO", "message": "Fetching Todays Events." }
{ "time": "2021-08-17 09:18:04.7894", "level": "INFO", "message": "Application started. Press Ctrl+C to shut down." }
{ "time": "2021-08-17 09:18:04.7894", "level": "INFO", "message": "Hosting environment: Production", "envName": "Production" }
{ "time": "2021-08-17 09:18:04.8118", "level": "INFO", "message": "Content root path: C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1", "contentRoot": "C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1" }
{ "time": "2021-08-17 09:18:07.2309", "level": "INFO", "message": "Entity Framework Core 5.0.9 initialized 'DbContextData' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MaxPoolSize=128 CommandTimeout=120 ", "version": "5.0.9", "contextType": "DbContextData", "provider": "Microsoft.EntityFrameworkCore.SqlServer", "options": "MaxPoolSize=128 CommandTimeout=120 ", "EventId_Id": 10403, "EventId_Name": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized", "EventId": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized" }
{ "time": "2021-08-17 09:18:07.6092", "level": "INFO", "message": "Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "17", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:12.6116", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:22:12.6369", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:22:12.6369", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:22:12.6369", "level": "INFO", "message": "------------------------------------Fetch Automator Inilializing---------------------------------" }
{ "time": "2021-08-17 09:22:12.6369", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:22:12.6369", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:22:12.6369", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:22:12.6369", "level": "INFO", "message": "                                                                                                 " }
{ "time": "2021-08-17 09:22:12.6369", "level": "INFO", "message": "                Batch Initialized with Identifier 62eff31b-5d50-4277-876f-b718e6459e1b          " }
{ "time": "2021-08-17 09:22:12.6369", "level": "INFO", "message": "Fetching Todays Events." }
{ "time": "2021-08-17 09:22:12.7659", "level": "INFO", "message": "Application started. Press Ctrl+C to shut down." }
{ "time": "2021-08-17 09:22:12.7695", "level": "INFO", "message": "Hosting environment: Production", "envName": "Production" }
{ "time": "2021-08-17 09:22:12.7695", "level": "INFO", "message": "Content root path: C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1", "contentRoot": "C:\\Users\\Craig\\Documents\\repo\\Prsonal\\Race-Horse-Data-Capture\\RHDCAutomation\\bin\\Debug\\netcoreapp3.1" }
{ "time": "2021-08-17 09:22:17.8612", "level": "INFO", "message": "Entity Framework Core 5.0.9 initialized 'DbContextData' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MaxPoolSize=128 CommandTimeout=120 ", "version": "5.0.9", "contextType": "DbContextData", "provider": "Microsoft.EntityFrameworkCore.SqlServer", "options": "MaxPoolSize=128 CommandTimeout=120 ", "EventId_Id": 10403, "EventId_Name": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized", "EventId": "Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized" }
{ "time": "2021-08-17 09:22:18.2314", "level": "INFO", "message": "Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "19", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:18.2970", "level": "INFO", "message": "Wolverhampton already exists in the database." }
{ "time": "2021-08-17 09:22:18.4285", "level": "INFO", "message": "Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_event] ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);\r\nSELECT [event_id]\r\nFROM [tb_event]\r\nWHERE @@ROWCOUNT = 1 AND [event_id] = scope_identity();", "elapsed": "18", "parameters": "@p0='?' (DbType = Boolean), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_event] ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);\r\nSELECT [event_id]\r\nFROM [tb_event]\r\nWHERE @@ROWCOUNT = 1 AND [event_id] = scope_identity();", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:23.4877", "level": "INFO", "message": "Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "1", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:29.7634", "level": "INFO", "message": "Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "elapsed": "2", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:31.6980", "level": "INFO", "message": "Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_event] ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);\r\nSELECT [event_id]\r\nFROM [tb_event]\r\nWHERE @@ROWCOUNT = 1 AND [event_id] = scope_identity();", "elapsed": "2", "parameters": "@p0='?' (DbType = Boolean), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_event] ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);\r\nSELECT [event_id]\r\nFROM [tb_event]\r\nWHERE @@ROWCOUNT = 1 AND [event_id] = scope_identity();", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:32.4829", "level": "INFO", "message": "Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "1", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:39.4038", "level": "INFO", "message": "Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "elapsed": "1", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:39.4293", "level": "INFO", "message": "Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_event] ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);\r\nSELECT [event_id]\r\nFROM [tb_event]\r\nWHERE @@ROWCOUNT = 1 AND [event_id] = scope_identity();", "elapsed": "1", "parameters": "@p0='?' (DbType = Boolean), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_event] ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);\r\nSELECT [event_id]\r\nFROM [tb_event]\r\nWHERE @@ROWCOUNT = 1 AND [event_id] = scope_identity();", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:42.5006", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "0", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:42.5151", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "elapsed": "0", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:42.5203", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_event] ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);\r\nSELECT [event_id]\r\nFROM [tb_event]\r\nWHERE @@ROWCOUNT = 1 AND [event_id] = scope_identity();", "elapsed": "0", "parameters": "@p0='?' (DbType = Boolean), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_event] ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);\r\nSELECT [event_id]\r\nFROM [tb_event]\r\nWHERE @@ROWCOUNT = 1 AND [event_id] = scope_identity();", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:42.5203", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='120']\r\nSELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "elapsed": "0", "parameters": "", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT [t].[course_id], [t].[all_weather], [t].[country_code], [t].[name]\r\nFROM [tb_course] AS [t]", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:42.5457", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "elapsed": "0", "parameters": "@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_course] ([course_id], [all_weather], [country_code], [name])\r\nVALUES (@p0, @p1, @p2, @p3);", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:42.5457", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_event] ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);\r\nSELECT [event_id]\r\nFROM [tb_event]\r\nWHERE @@ROWCOUNT = 1 AND [event_id] = scope_identity();", "elapsed": "0", "parameters": "@p0='?' (DbType = Boolean), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_event] ([abandoned], [batch_id], [course_id], [created], [hash_name], [meeting_type], [meeting_url], [name], [races], [surface_type])\r\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);\r\nSELECT [event_id]\r\nFROM [tb_event]\r\nWHERE @@ROWCOUNT = 1 AND [event_id] = scope_identity();", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:42.5640", "level": "INFO", "message": "5 Events Retrieved and stored successfully." }
{ "time": "2021-08-17 09:22:42.6328", "level": "INFO", "message": "Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='120']\r\nSELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "elapsed": "1", "parameters": "@__p_0='?' (DbType = Int32)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:42.6535", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='120']\r\nSELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "elapsed": "0", "parameters": "@__p_0='?' (DbType = Int32)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:42.6608", "level": "INFO", "message": "Fetching Races for event Wolverhampton_8\/13\/2021." }
{ "time": "2021-08-17 09:22:42.6608", "level": "INFO", "message": "Races Retrieved for event Wolverhampton_8\/13\/2021" }
{ "time": "2021-08-17 09:22:42.6608", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='120']\r\nSELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "elapsed": "0", "parameters": "@__p_0='?' (DbType = Int32)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:42.6608", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='120']\r\nSELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "elapsed": "0", "parameters": "@__p_0='?' (DbType = Int32)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:42.6769", "level": "INFO", "message": "Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='120']\r\nSELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "elapsed": "0", "parameters": "@__p_0='?' (DbType = Int32)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SELECT TOP(1) [t].[event_id], [t].[abandoned], [t].[batch_id], [t].[course_id], [t].[created], [t].[hash_name], [t].[meeting_type], [t].[meeting_url], [t].[name], [t].[races], [t].[surface_type]\r\nFROM [tb_event] AS [t]\r\nWHERE [t].[event_id] = @__p_0", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:42.7504", "level": "INFO", "message": "Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000)], CommandType='Text', CommandTimeout='120']\r\nSET NOCOUNT ON;\r\nINSERT INTO [tb_batch] ([batch_id], [date], [diagnostics])\r\nVALUES (@p0, @p1, @p2);", "elapsed": "1", "parameters": "@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000)", "commandType": "Text", "commandTimeout": 120, "newLine": "\r\n", "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [tb_batch] ([batch_id], [date], [diagnostics])\r\nVALUES (@p0, @p1, @p2);", "EventId_Id": 20101, "EventId_Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted", "EventId": "Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted" }
{ "time": "2021-08-17 09:22:42.7622", "level": "INFO", "message": "{\"Automator\":0,\"TimeInitialized\":\"2021-08-17T09:22:12.6409592+02:00\",\"TimeCompleted\":\"2021-08-17T09:22:42.6868533+02:00\",\"EventsFiltered\":5,\"ErrorsEncountered\":0,\"EllapsedTime\":30.0458941}" }
{ "time": "2021-08-17 09:22:42.7622", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:22:42.7622", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:22:42.7622", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:22:42.7622", "level": "INFO", "message": "-----------------------------------Automator Terminating-----------------------------------------" }
{ "time": "2021-08-17 09:22:42.7622", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:22:42.7622", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
{ "time": "2021-08-17 09:22:42.7622", "level": "INFO", "message": "-------------------------------------------------------------------------------------------------" }
